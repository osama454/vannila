<!DOCTYPE html>
<html>
<head>
<title>Habit Tracker</title>
<style>
body {
  font-family: sans-serif;
}
.habit {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}
.habit input[type="text"] {
  flex-grow: 1;
  margin-right: 10px;
}
</style>
</head>
<body>

<h1>Habit Tracker</h1>

<div id="habits">
  </div>

<button onclick="addHabit()">Add Habit</button>

<script>
let habits = [];

function addHabit() {
  const newHabit = {
    name: "",
    times: 1
  };
  habits.push(newHabit);
  renderHabits();
}

function removeHabit(index) {
  habits.splice(index, 1);
  renderHabits();
}


function updateHabit(index, field, value) {
  if (field === 'times') {
      value = parseInt(value, 10) || 0; // Ensure times is a number or 0
      habits[index][field] = value ;

  } else {
      habits[index][field] = value;
  }

  renderHabits();
  localStorage.setItem('habits', JSON.stringify(habits)); // Store updated habits
}

function renderHabits() {
  const habitsDiv = document.getElementById("habits");
  habitsDiv.innerHTML = ""; // Clear existing habits


  for (let i = 0; i < habits.length; i++) {
    const habit = habits[i];
    const habitDiv = document.createElement("div");
    habitDiv.classList.add("habit");

    const nameInput = document.createElement("input");
    nameInput.type = "text";
    nameInput.value = habit.name;
    nameInput.placeholder = "Habit Name";
    nameInput.addEventListener('input', (event) => {
      updateHabit(i, 'name', event.target.value);
    });

    const timesInput = document.createElement("input");
    timesInput.type = "number";
    timesInput.min = "0";  //added validation for times input
    timesInput.value = habit.times;
    timesInput.addEventListener('input', (event) => {
        updateHabit(i, 'times', event.target.value);
    });


    const removeButton = document.createElement("button");
    removeButton.textContent = "Remove";
    removeButton.addEventListener('click', function() { removeHabit(i); });


    habitDiv.appendChild(nameInput);
    habitDiv.appendChild(timesInput);
    habitDiv.appendChild(removeButton);
    habitsDiv.appendChild(habitDiv);
  }

}

// Load habits from localStorage on page load
window.addEventListener('load', () => {
    const storedHabits = localStorage.getItem('habits');
    if (storedHabits) {
        habits = JSON.parse(storedHabits);
        renderHabits();
    }
});
</script>

</body>
</html>